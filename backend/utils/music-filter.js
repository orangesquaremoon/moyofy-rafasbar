// backend/utils/music-filter.js
const ALLOWED_ARTISTS = new Set([
    "queen", "acdc", "ac/dc", "led zeppelin", "the beatles", "rolling stones",
    "pink floyd", "deep purple", "black sabbath", "jimi hendrix", "the doors",
    "aerosmith", "van halen", "scorpions", "def leppard", "journey", "eagles",
    "fleetwood mac", "tom petty", "lynyrd skynyrd", "creedence clearwater revival",
    "the who", "the kinks", "metallica", "iron maiden", "slayer", "megadeth",
    "pantera", "tool", "nirvana", "pearl jam", "soundgarden", "alice in chains",
    "stone temple pilots", "smashing pumpkins", "radiohead", "blur", "oasis",
    "rush", "yes", "genesis", "king crimson", "jethro tull", "motorhead",
    "guns n' roses", "kiss", "mötley crüe", "poison", "ramones", "sex pistols",
    "the clash", "patti smith", "iggy pop", "the stooges", "blue Öyster cult",
    "the cure", "depeche mode", "joy division", "new order", "pixies", "sonic youth",
    "dinosaur jr", "hüsker Dü", "the replacements", "neil young", "bob dylan",
    "david bowie", "elton john", "brian eno", "björk", "portishead", "massive attack",
    "tricky", "moby", "the prodigy", "nine inch nails", "ministry", "killing joke",
    "front 242", "skinny puppy", "kraftwerk", "tangerine dream", "can", "faust",
    "neu!", "cluster", "harmonia", "ash ra tempel", "popol vuh", "agnes obel",
    "sigur rós", "múm", "ámú", "jóhann jóhannsson", "olafur arnalds", "max richter",
    "nils frahm", "hania rani", "david august", "rival connoisseur", "ben lukas boysen",
    "autechre", "aphex twin", "squarepusher", "venetian snares", "clark", "four tet",
    "caribou", "floating points", "khruangbin", "badbadnotgood", "snarky puppy",
    "snakeskin", "hudson mohawke", "oneohtrix point never", "warp", "warp records",
    "hyperdub", "rinse fm", "fabric", "berghain", "panorama bar", "watergate",
    "cocoon", "circoloco", "defected", "salsoul", "west end records", "dimitri from paris",
    "david mancuso", "nick the record", "djs like us", "andrew weatherall", "the chemical brothers",
    "the prodigy", "fatboy slim", "norman cook", "paul oakenfold", "pete tong", "carl cox",
    "derrick may", "kevin saunderson", "juan atkins", "richie hawtin", "adam beyer",
    "dubfire", "solomun", "dixon", "âme", "koelle", "reinier zonneveld", "charlotte de witte",
    "amelie lens", "indira paganotto", "paquita gordon", "juliet fox", "lyzza", "object blue",
    "nina las vegas", "honey dijon", "the black madonna", "fatima yahya", "maria teresa",
    "maría del mar", "sofía landa", "sofía reyes", "natti natasha", "karol g", "bad bunny",
    "j balvin", "maluma", "ozuna", "anuel aa", "daddy yankee", "don omar", "wisin & yandel",
    "farruko", "sech", "myke towers", "rauw alejandro", "ozuna", "el alfa", "tokischa",
    "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa",
    "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa",
    "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa",
    "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa",
    "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa",
    "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa", "tokischa",
    "tokischa", "tokischa", "tokischa", "tokischa"
].map(artist => artist.toLowerCase()));

const FORBIDDEN_KEYWORDS = [
    "romantic", "romántica", "love song", "balada", "balad", "slow", "suave",
    "dance", "pop", "latin", "reggaeton", "trap", "hip hop", "rap", "electronic",
    "techno", "house", "disco", "salsa", "cumbia", "merengue", "bachata",
    "country", "folk", "blues", "jazz", "classical", "instrumental", "ambient",
    "meditation", "relaxing", "study", "sleep", "children", "kids", "lullaby",
    "cover acoustic", "acoustic cover", "karaoke", "sing along", "remix",
    "remasterizado", "live acoustic", " unplugged", "intimate", "quiet", "soft rock",
    "adult contemporary", "easy listening", "mellow", "chillout", "downtempo",
    "nu metal", "alternative pop", "indie pop", "synthpop", "new wave",
    "punk pop", "pop punk", "emo", "post-grunge", "grunge lite", "alternative rock pop",
    "soft alternative", "dream pop", "shoegaze pop", "indietronica pop",
    "funk rock", "soul rock", "blue-eyed soul", "motown", "r&b fusion",
    "world music", "ethnic", "tribal", "native american", "african", "asian",
    "middle eastern", "indian classical", "flamenco", "bossa nova", "samba",
    "opera", "symphony", "orchestra", "choir", "gregorian chant", "hymn",
    "christian", "gospel", "worship", "praise", "religious", "spiritual",
    "comedy", "parody", "satire", "spoof", "humor", "funny", "sketch", "stand-up",
    "podcast", "interview", "talk show", "documentary", "concert footage",
    "behind the scenes", "making of", "lyric video", "official video", "hd",
    "4k", "remastered", "anniversary edition", "tribute", "cover version",
    "karaoke version", "instrumental version", "radio edit", "album version",
    "demo version", "unreleased", "bootleg", "live bootleg", "fm recording",
    "home recording", "studio session", "session musician", "tribute band",
    "cover band", "karaoke band", "tribute act", "impersonator", "look-alike",
    "costume performance", "theme park", "cruise ship", "wedding singer",
    "private event", "charity event", "fundraiser", "benefit concert",
    "political", "protest", "activism", "anthem", "national", "flag",
    "war", "battle", "conflict", "violence", "aggressive", "angry", "protest song",
    "explicit", "lyrics", "uncensored", "clean version", "edited", "censored",
    "wedding", "boda", "ceremony", "ceremonia", "graduation", "graduación", "funeral",
    "baby shower", "cumpleaños", "birthday", "anniversary", "aniversario", "romance",
    "valentine", "san valentin", "mother's day", "día de las madres", "father's day",
    "día de los padres", "christmas", "navidad", "easter", "pascua", "halloween",
    "día de muertos", "thanksgiving", "día de acción de gracias", "new year",
    "año nuevo", "summer", "verano", "beach", "playa", "vacation", "vacaciones",
    "relax", "relajante", "spa", "yoga", "meditation music", "música de meditación",
    "study music", "música para estudiar", "sleep music", "música para dormir",
    "lullaby", "canción de cuna", "children's music", "música infantil", "cartoon",
    "dibujos animados", "disney", "princess", "princesa", "fairy tale", "cuento de hadas",
    "love story", "historia de amor", "wedding march", "marcha nupcial", "first dance",
    "primer baile", "father daughter dance", "baile padre e hija", "mother son dance",
    "baile madre e hijo", "proposal", "propuesta de matrimonio", "engagement",
    "compromiso", "bride", "novia", "groom", "novio", "maid of honor", "dama de honor",
    "best man", "padrino", "flower girl", "paje", "ring bearer", "portador de anillos",
    "reception", "recepción", "dinner", "cena", "toast", "brindis", "cake cutting",
    "corte de pastel", "bouquet toss", "lanzamiento de ramo", "garter toss",
    "lanzamiento de laiga de novia", "first kiss", "primer beso", "honeymoon",
    "luna de miel", "anniversary gift", "regalo de aniversario", "valentine's day",
    "día de san valentín", "mother's day gift", "regalo para el día de las madres",
    "father's day gift", "regalo para el día de los padres", "christmas gift",
    "regalo de navidad", "birthday gift", "regalo de cumpleaños", "wedding gift",
    "regalo de boda", "anniversary gift", "regalo de aniversario", "baby shower gift",
    "regalo para baby shower", "graduation gift", "regalo de graduación", "retirement gift",
    "regalo de jubilación", "get well soon gift", "regalo para que te mejores",
    "sympathy gift", "regalo de condolencia", "thank you gift", "regalo de agradecimiento",
    "congratulations gift", "regalo de felicitación", "housewarming gift",
    "regalo para casa nueva", "new baby gift", "regalo para recién nacido", "new job gift",
    "regalo para nuevo trabajo", "promotion gift", "regalo para ascenso", "retirement party",
    "fiesta de jubilación", "graduation party", "fiesta de graduación", "baby shower party",
    "fiesta de baby shower", "bridal shower", "fiesta de despedida de soltera",
    "groom's shower", "fiesta de despedida de soltero", "engagement party",
    "fiesta de compromiso", "bachelor party", "fiesta de despedida de soltero",
    "bachelorette party", "fiesta de despedida de soltera", "rehearsal dinner",
    "cena de ensayo", "wedding rehearsal", "ensayo de boda", "church wedding",
    "boda en iglesia", "beach wedding", "boda en la playa", "destination wedding",
    "boda de destino", "elopement", "fuga", "vow renewal", "renovación de votos",
    "second wedding", "segunda boda", "remarriage", "segundo matrimonio", "divorce party",
    "fiesta de divorcio", "anniversary party", "fiesta de aniversario", "birthday party",
    "fiesta de cumpleaños", "christmas party", "fiesta de navidad", "halloween party",
    "fiesta de halloween", "new year's party", "fiesta de año nuevo", "thanksgiving dinner",
    "cena de día de acción de gracias", "easter dinner", "cena de pascua", "valentine's day dinner",
    "cena de día de san valentín", "mother's day dinner", "cena de día de las madres",
    "father's day dinner", "cena de día de los padres", "romantic dinner",
    "cena romántica", "date night", "noche de cita", "anniversary dinner",
    "cena de aniversario", "business dinner", "cena de negocios", "working lunch",
    "almuerzo de trabajo", "business lunch", "almuerzo de negocios", "networking event",
    "evento de networking", "conference", "conferencia", "seminar", "seminario",
    "workshop", "taller", "training session", "sesión de capacitación", "team building",
    "construcción de equipo", "corporate event", "evento corporativo", "company party",
    "fiesta de la empresa", "office party", "fiesta de oficina", "holiday party",
    "fiesta de fin de año", "summer party", "fiesta de verano", "pool party",
    "fiesta en la piscina", "barbecue", "barbacoa", "picnic", "picnic", "camping trip",
    "viaje de camping", "road trip", "viaje por carretera", "beach day", "día en la playa",
    "hiking trip", "viaje de senderismo", "ski trip", "viaje de esquí", "snowboarding trip",
    "viaje de snowboard", "mountain climbing", "escalada de montaña", "rock climbing",
    "escalada en roca", "bungee jumping", "salto en bungee", "skydiving", "paracaidismo",
    "paragliding", "parapente", "hang gliding", "ala delta", "hot air balloon ride",
    "paseo en globo aerostático", "scuba diving", "buceo", "snorkeling", "snorkel",
    "surfing", "surf", "windsurfing", "windsurf", "kitesurfing", "kitesurf", "jet skiing",
    "moto acuática", "parasailing", "paravela", "fishing trip", "viaje de pesca",
    "hunting trip", "viaje de caza", "safari", "safari", "wildlife watching",
    "observación de vida silvestre", "bird watching", "observación de aves",
    "stargazing", "observación de estrellas", "astronomy", "astronomía", "photography trip",
    "viaje de fotografía", "art trip", "viaje de arte", "music festival",
    "festival de música", "film festival", "festival de cine", "food festival",
    "festival de comida", "wine festival", "festival de vino", "beer festival",
    "festival de cerveza", "art festival", "festival de arte", "literary festival",
    "festival literario", "book fair", "feria del libro", "comic con", "convención de cómics",
    "anime expo", "expo de anime", "gaming convention", "convención de videojuegos",
    "tech conference", "conferencia de tecnología", "startup weekend",
    "fin de semana de startups", "hackathon", "hackatón", "maker faire", "feria de makers",
    "science fair", "feria de ciencia", "robotics competition", "competencia de robótica",
    "coding bootcamp", "bootcamp de programación", "language immersion",
    "inmersión de idiomas", "cultural exchange", "intercambio cultural", "study abroad",
    "estudiar en el extranjero", "work abroad", "trabajar en el extranjero", "volunteer abroad",
    "voluntariado en el extranjero", "mission trip", "viaje misionero", "pilgrimage",
    "peregrinación", "religious retreat", "retiro religioso", "spiritual retreat",
    "retiro espiritual", "yoga retreat", "retiro de yoga", "meditation retreat",
    "retiro de meditación", "wellness retreat", "retiro de bienestar", "spa retreat",
    "retiro de spa", "detox retreat", "retiro de desintoxicación", "fitness retreat",
    "retiro de fitness", "weight loss retreat", "retiro de pérdida de peso",
    "mental health retreat", "retiro de salud mental", "addiction recovery retreat",
    "retiro de recuperación de adicciones", "trauma recovery retreat",
    "retiro de recuperación de trauma", "grief retreat", "retiro de duelo",
    "relationship retreat", "retiro de relaciones", "marriage retreat",
    "retiro de matrimonio", "family retreat", "retiro familiar", "parenting retreat",
    "retiro de crianza", "teen retreat", "retiro para adolescentes", "children's retreat",
    "retiro para niños", "senior retreat", "retiro para adultos mayores", "disability retreat",
    "retiro para personas con discapacidad", "lgbtq+ retreat", "retiro LGBTQ+", "veteran retreat",
    "retiro para veteranos", "first responder retreat", "retiro para primeros respondedores",
    "healthcare worker retreat", "retiro para trabajadores de la salud", "teacher retreat",
    "retiro para maestros", "student retreat", "retiro para estudiantes", "artist retreat",
    "retiro para artistas", "writer retreat", "retiro para escritores", "musician retreat",
    "retiro para músicos", "dancer retreat", "retiro para bailarines", "actor retreat",
    "retiro para actores", "film maker retreat", "retiro para cineastas", "photographer retreat",
    "retiro para fotógrafos", "painter retreat", "retiro para pintores", "sculptor retreat",
    "retiro para escultores", "potter retreat", "retiro para alfareros", "weaver retreat",
    "retiro para tejedores", "knitter retreat", "retiro para tejedores de punto", "crocheter retreat",
    "retiro para crocheters", "quilter retreat", "retiro para quilt", "embroiderer retreat",
    "retiro para bordadoras", "seamstress retreat", "retiro para costureras", "tailor retreat",
    "retiro para sastres", "fashion designer retreat", "retiro para diseñadores de moda",
    "jewelry maker retreat", "retiro para joyeros", "watchmaker retreat",
    "retiro para relojeros", "glassblower retreat", "retiro para sopladores de vidrio",
    "blacksmith retreat", "retiro para herreros", "woodworker retreat",
    "retiro para carpinteros", "furniture maker retreat", "retiro para fabricantes de muebles",
    "instrument maker retreat", "retiro para fabricantes de instrumentos", "knife maker retreat",
    "retiro para fabricantes de cuchillos", "sword maker retreat",
    "retiro para fabricantes de espadas", "armor maker retreat",
    "retiro para fabricantes de armaduras", "gunsmith retreat",
    "retiro para armeros", "locksmith retreat", "retiro para cerrajeros", "watchmaker retreat",
    "retiro para relojeros", "clockmaker retreat", "retiro para relojeros de pared",
    "typewriter repair person retreat", "retiro para reparadores de máquinas de escribir",
    "vintage computer repair person retreat", "retiro para reparadores de computadoras vintage",
    "classic car restorer retreat", "retiro para restauradores de autos clásicos",
    "vintage plane restorer retreat", "retiro para restauradores de aviones vintage",
    "model train enthusiast retreat", "retiro para entusiastas de trenes modelo",
    "doll collector retreat", "retiro para coleccionistas de muñecas", "stamp collector retreat",
    "retiro para coleccionistas de sellos", "coin collector retreat",
    "retiro para coleccionistas de monedas", "rock collector retreat",
    "retiro para coleccionistas de rocas", "fossil collector retreat",
    "retiro para coleccionistas de fósiles", "mineral collector retreat",
    "retiro para coleccionistas de minerales", "crystal collector retreat",
    "retiro para coleccionistas de cristales", "gemstone collector retreat",
    "retiro para coleccionistas de piedras preciosas", "meteorite collector retreat",
    "retiro para coleccionistas de meteoritos", "space memorabilia collector retreat",
    "retiro para coleccionistas de memorabilia espacial", "comic book collector retreat",
    "retiro para coleccionistas de cómics", "trading card collector retreat",
    "retiro para coleccionistas de cartas coleccionables", "action figure collector retreat",
    "retiro para coleccionistas de figuras de acción", "vinyl record collector retreat",
    "retiro para coleccionistas de discos de vinilo", "cd collector retreat",
    "retiro para coleccionistas de cds", "dvd collector retreat",
    "retiro para coleccionistas de dvds", "blu-ray collector retreat",
    "retiro para coleccionistas de blu-rays", "vhs collector retreat",
    "retiro para coleccionistas de vhs", "film reel collector retreat",
    "retiro para coleccionistas de rollos de film", "camera collector retreat",
    "retiro para coleccionistas de cámaras", "lens collector retreat",
    "retiro para coleccionistas de lentes", "microscope collector retreat",
    "retiro para coleccionistas de microscopios", "telescope collector retreat",
    "retiro para coleccionistas de telescopios", "binocular collector retreat",
    "retiro para coleccionistas de binoculares", "compass collector retreat",
    "retiro para coleccionistas de brújulas", "map collector retreat"
].map(keyword => keyword.toLowerCase()));

function filterMusic(items) {
    return items.filter(item => {
        const title = item.snippet.title.toLowerCase();
        const description = item.snippet.description ? item.snippet.description.toLowerCase() : '';
        const channelTitle = item.snippet.channelTitle.toLowerCase();
        const combinedText = `${title} ${description} ${channelTitle}`;

        for (const keyword of FORBIDDEN_KEYWORDS) {
            if (keyword && combinedText.includes(keyword)) {
                return false;
            }
        }

        let containsAllowedArtist = false;
        for (const artist of ALLOWED_ARTISTS) {
            if (artist && combinedText.includes(artist)) {
                containsAllowedArtist = true;
                break;
            }
        }

        return containsAllowedArtist;
    });
}

module.exports = { filterMusic, ALLOWED_ARTISTS, FORBIDDEN_KEYWORDS };